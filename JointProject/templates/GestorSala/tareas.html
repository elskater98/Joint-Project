{% extends 'generic.html' %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

{% block informacio %}
    {% if role_class.role == 'gestorsala' or role_class.role == 'admin' or role_class.role == 'operario'%}
        <div class="container">
            <form action="{% url 'api_request' %}" method="post">
                {% csrf_token %}
                    <table height=100% width=100%>
                        <tr>
                            <th>
                                <input id="search" name="search" type="text" class="span5" placeholder="ReferÃ¨ncia"/>
                            </th>
                            <th>
                                <button style="font-size:24px">Buscar <i class="fa fa-search"></i></button>
                            </th>
                        </tr>
                    </table>
            </form>
        </div>



        <div style="margin-top:20px" class="container">
            <div class="row">
                <div class="col">
                    <h4 align="center">Pendiente</h4>
                    {% for tarea_p in tareas_p %}
                        {% if tarea_p.tipus == 'B' %}
                        <div class="alert alert-light alert-dismissible fade show">
                            <strong>{{ tarea_p.title}}:</strong> {{ tarea_p.description }}.
                            <strong>{{ tarea_p.assigned.user }}:</strong>
                            <a href="{% url 'task_detail' tarea_p.pk %}">Mostrar Tarea</a>
                            {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                <a href="{% url 'task_update_all' tarea_p.pk %}">Actualizar Tarea</a>
                            {% endif %}
                            <a href="{% url 'task_update_status' tarea_p.pk %}">Cambiar Estado</a>
                            <a href="{% url 'task_update_assigned' tarea_p.pk %}">Asignar Tarea</a>
                        </div>
                        {% endif %}
                        {% if tarea_p.tipus == 'V' %}
                            <div class="alert alert-success alert-dismissible fade show">
                                <strong>{{ tarea_p.title}}:</strong> {{ tarea_p.description }}.
                                <strong>{{ tarea_p.assigned.user }}:</strong>
                                <a href="{% url 'task_detail' tarea_p.pk %}">Mostrar Tarea</a>
                                {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                    <a href="{% url 'task_update_all' tarea_p.pk %}">Actualizar Tarea</a>
                                {% endif %}
                                <a href="{% url 'task_update_status' tarea_p.pk %}">Cambiar Estado</a>
                                <a href="{% url 'task_update_assigned' tarea_p.pk %}">Asignar Tarea</a>
                            </div>
                        {% endif %}
                        {% if tarea_p.tipus == 'A' %}
                            <div class="alert alert-primary alert-dismissible fade show">
                                <strong>{{ tarea_p.title}}:</strong> {{ tarea_p.description }}.
                                <strong>{{ tarea_p.assigned.user }}:</strong>
                                <a href="{% url 'task_detail' tarea_p.pk %}">Mostrar Tarea</a>
                                {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                    <a href="{% url 'task_update_all' tarea_p.pk %}">Actualizar Tarea</a>
                                {% endif %}
                                <a href="{% url 'task_update_status' tarea_p.pk %}">Cambiar Estado</a>
                                <a href="{% url 'task_update_assigned' tarea_p.pk %}">Asignar Tarea</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>

                <div class="col">
                    <h4 align="center">Realizando</h4>
                    {% for tarea_r in tareas_r %}
                        {% if tarea_r.tipus == 'A' %}
                            <div class="alert alert-primary alert-dismissible fade show">
                                <strong>{{ tarea_r.title}}:</strong> {{ tarea_r.description }}.
                                <strong>{{ tarea_r.assigned.user }}:</strong>
                                <a href="{% url 'task_detail' tarea_r.pk %}">Mostrar Tarea</a>
                                {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                    <a href="{% url 'task_update_all' tarea_r.pk %}">Actualizar Tarea</a>
                                {% endif %}
                               <a href="{% url 'task_update_status' tarea_r.pk %}">Cambiar Estado</a>
                                <a href="{% url 'task_update_assigned' tarea_r.pk %}">Asignar Tarea</a>
                            </div>
                        {% endif %}
                        {% if tarea_r.tipus == 'B' %}
                            <div class="alert alert-light alert-dismissible fade show">
                            <strong>{{ tarea_r.title}}:</strong> {{ tarea_r.description }}.
                                <strong>{{ tarea_r.assigned.user }}:</strong>
                                <a href="{% url 'task_detail' tarea_r.pk %}">Mostrar Tarea</a>
                                {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                    <a href="{% url 'task_update_all' tarea_r.pk %}">Actualizar Tarea</a>
                                {% endif %}
                               <a href="{% url 'task_update_status' tarea_r.pk %}">Cambiar Estado</a>
                                <a href="{% url 'task_update_assigned' tarea_r.pk %}">Asignar Tarea</a>
                            </div>
                        {% endif %}
                        {% if tarea_r.tipus == 'V' %}
                            <div class="alert alert-success alert-dismissible fade show">
                                <strong>{{ tarea_r.title}}:</strong> {{ tarea_r.description }}.
                                <strong>{{ tarea_r.assigned.user }}:</strong>
                                <a href="{% url 'task_detail' tarea_r.pk %}">Mostrar Tarea</a>
                                {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                    <a href="{% url 'task_update_all' tarea_r.pk %}">Actualizar Tarea</a>
                                {% endif %}
                               <a href="{% url 'task_update_status' tarea_r.pk %}">Cambiar Estado</a>
                                <a href="{% url 'task_update_assigned' tarea_r.pk %}">Asignar Tarea</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>

                <div class="col">
                    <h4 align="center">Finalizado</h4>
                    {% for tarea_f in tareas_f %}
                        {% if tarea_f.tipus == 'A' %}
                            <div class="alert alert-primary alert-dismissible fade show">
                            <strong>{{ tarea_f.title}}:</strong> {{ tarea_f.description }}.
                            <strong>{{ tarea_f.assigned.user }}:</strong>
                            <a href="{% url 'task_detail' tarea_f.pk %}">Mostrar Tarea</a>
                            {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                <a href="{% url 'task_update_all' tarea_f.pk %}">Actualizar Tarea</a>
                                <a href="{% url 'task_delete' tarea_f.pk %}">Eliminar</a>
                            {% endif %}
                             <a href="{% url 'task_update_status' tarea_f.pk %}">Cambiar Estado</a>
                            <a href="{% url 'task_update_assigned' tarea_f.pk %}">Asignar Tarea</a>
                        </div>
                        {% endif %}
                        {% if tarea_f.tipus == 'B' %}
                            <div class="alert alert-light alert-dismissible fade show">
                             <strong>{{ tarea_f.title}}:</strong> {{ tarea_f.description }}.
                            <strong>{{ tarea_f.assigned.user }}:</strong>
                            <a href="{% url 'task_detail' tarea_f.pk %}">Mostrar Tarea</a>
                            {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                <a href="{% url 'task_update_all' tarea_f.pk %}">Actualizar Tarea</a>
                                <a href="{% url 'task_delete' tarea_f.pk %}">Eliminar</a>
                            {% endif %}
                             <a href="{% url 'task_update_status' tarea_f.pk %}">Cambiar Estado</a>
                            <a href="{% url 'task_update_assigned' tarea_f.pk %}">Asignar Tarea</a>
                        </div>
                        {% endif %}
                        {% if tarea_f.tipus == 'V' %}
                            <div class="alert alert-success alert-dismissible fade show">
                            <strong>{{ tarea_f.title}}:</strong> {{ tarea_f.description }}.
                            <strong>{{ tarea_f.assigned.user }}:</strong>
                            <a href="{% url 'task_detail' tarea_f.pk %}">Mostrar Tarea</a>
                            {% if role_class.role == 'gestorsala' or role_class.role == 'admin' %}
                                <a href="{% url 'task_update_all' tarea_f.pk %}">Actualizar Tarea</a>
                                <a href="{% url 'task_delete' tarea_f.pk %}">Eliminar</a>
                            {% endif %}
                             <a href="{% url 'task_update_status' tarea_f.pk %}">Cambiar Estado</a>
                            <a href="{% url 'task_update_assigned' tarea_f.pk %}">Asignar Tarea</a>
                        </div>
                        {% endif %}

                    {% endfor %}
                </div>
        </div>
    {% endif %}
{% endblock %}